@using Page = ToplapLisbon.WebPage
@inherits LayoutComponentBase
@inject IJSRuntime JSRuntime
@inject PageData PageData

<MudThemeProvider Theme="Toplap"/>
<MudDialogProvider/>
<MudSnackbarProvider/>


<MudLayout>
    <MudItem Style="position:absolute; z-index:-10;" id="sketch-div"/>
    <center>
        <br/>
        <MudText Typo="Typo.h4">
            TOPLAP
            <MudImage Src="images/toplapLogoWhite.png" Style="width: 50px; height: 50px;"/>
            LISBON
        </MudText>
        <MudButton>
            <MudNavLink Href="" Style="@("color: #" + (PageData.WebPage == WebPage.About ? "0f0f" : "ffff"))">About</MudNavLink>
        </MudButton>
        |
        <MudButton>
            <MudNavLink Href="/Events" Style="@("color: #" + (PageData.WebPage == WebPage.Projects ? "0f0f" : "ffff"))">Events</MudNavLink>
        </MudButton>
    </center>
    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.ExtraExtraLarge">
            <CascadingValue Value="@Main">
                @Body
            </CascadingValue>
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {
    public MainLayout Main { get; set; }

    protected override void OnInitialized()
    {
        Main = this;
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender) await setP5();
    }

    private async Task setP5()
    {
        await JSRuntime.InvokeVoidAsync("setp5");
    }

    public void Refresh()
    {
        StateHasChanged();
    }

    MudTheme Toplap = new MudTheme()
    {
        Palette = new Palette()
        {
            Background = "000f",
            Black = "000f",
            BackgroundGrey = "111f",
            Surface = "111f",
            Primary = "0f0f",
            Secondary = "00ff",
            Tertiary = "bbbf",
            TextPrimary = "ffff",
            TextSecondary = "0f0f",
            DrawerBackground = "111f",
            DrawerText = "ffff"
        },
        LayoutProperties = new LayoutProperties()
        {
            AppbarHeight = "0px",
        }
    };
}